<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="在路上····">
<meta property="og:type" content="website">
<meta property="og:title" content="HardElm&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="HardElm&#39;s blog">
<meta property="og:description" content="在路上····">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="HardElm&#39;s blog">
<meta name="twitter:description" content="在路上····">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":true,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>HardElm's blog</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">HardElm's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学习笔记</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-board">
          <a href="/board/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-book"></i> <br />
            
            留言
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/批处理修改DNS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HardElm">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HardElm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/批处理修改DNS/" itemprop="url">批处理修改DNS</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T10:50:00+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/批处理/" itemprop="url" rel="index">
                    <span itemprop="name">批处理</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/批处理修改DNS/" class="leancloud_visitors" data-flag-title="批处理修改DNS">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>工作中经常要登录线上环境和内网测试环境，手动修改DNS甚是麻烦，特写下如下命令，顺带简单学习下批处理命令：</p>
<pre><code>@echo off
cls
echo 请选择DNS设置为内网（y）or外网（n）：
set /p name=
if &quot;%name%&quot;==&quot;y&quot; goto Ys
if &quot;%name%&quot;==&quot;n&quot; goto No

:Ys
echo.正在修改dns···
netsh interface ip set dns &quot;本地连接&quot; static 192.168.0.88 primary
echo 已设置为192.168.0.88 &gt;nul&amp;&amp;exit

:No
echo.正在修改dns···
netsh interface ip set dns name=&quot;本地连接&quot; source=dhcp
echo 已设置为自动获取DNS &gt;nul&amp;&amp;exit
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/基于ffmpeg进行转码工具的编写（未完成）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HardElm">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HardElm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/基于ffmpeg进行转码工具的编写（未完成）/" itemprop="url">基于ffmpeg进行转码工具的编写（未完成）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T09:37:30+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Java/" itemprop="url" rel="index">
                    <span itemprop="name">Java</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/基于ffmpeg进行转码工具的编写（未完成）/" class="leancloud_visitors" data-flag-title="基于ffmpeg进行转码工具的编写（未完成）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>参考了一些资料，学习过程中尝试写一个转码工具，由于一些个人能力和其他的一些原因暂时搁置，特此记录一些代码，留作参考。</p>
<p>一、GUI：</p>
<pre><code>package cn.com.huangyl.tool;

import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

import javax.swing.DefaultComboBoxModel;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFileChooser;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTabbedPane;
import javax.swing.JTextArea;
import javax.swing.JTextField;

public class FFmpegGUI {
    private JFrame frame = new JFrame(&quot;FFmpegGUI&quot;);
    private JTabbedPane tabbedPane = new JTabbedPane();

    private JPanel panel1 = new JPanel(new BorderLayout());
    private JPanel panelx = new JPanel(new BorderLayout());
    private JPanel panely = new JPanel(new BorderLayout());
    private JPanel panel2 = new JPanel(new BorderLayout());
    private JPanel panel3 = new JPanel(new GridLayout(2, 1));
    private JPanel panel4 = new JPanel(new BorderLayout());
    private JPanel panel5 = new JPanel(new BorderLayout());
    private JPanel panel6 = new JPanel(new BorderLayout());
    private JPanel panel7 = new JPanel(new BorderLayout());
    private JPanel panel8 = new JPanel(new BorderLayout());
    private JPanel panel9 = new JPanel(new BorderLayout());
    private JPanel panel10 = new JPanel(new BorderLayout());
    private JPanel panel11 = new JPanel(new BorderLayout());
    private JPanel panel12 = new JPanel(new GridLayout(6,1));
    private JPanel panel13 = new JPanel(new GridLayout(6,1));
    private JPanel panel14 = new JPanel(new BorderLayout());
    private JPanel panel15 = new JPanel(new BorderLayout());
    private JPanel panel16 = new JPanel(new BorderLayout());
    private JPanel panel17 = new JPanel(new BorderLayout());
    private JPanel panel18 = new JPanel(new GridLayout(1,2));
    private JPanel panel19 = new JPanel(new BorderLayout());
    private JPanel panel20 = new JPanel(new BorderLayout());

    private JButton Select = new JButton(&quot;选择&quot;);
    private JButton StartTranscode = new JButton(&quot;开始&quot;);
    private JButton Reset = new JButton(&quot;重置&quot;);
    //private JTextField display = new JTextField(&quot;请点击查询按钮&quot;);
    private JTextField FilePath = new JTextField(&quot;请选择文件路径&quot;);
    private JTextField VideoBitrate = new JTextField();
    private JTextField resolution = new JTextField();
    private JTextField AudioBitrate = new JTextField();
    private JTextField AudioSampleRate = new JTextField();
    private JTextField CreateFileName = new JTextField();
    private JTextField CreateFileFormat = new JTextField();

    private JLabel label1 = new JLabel(&quot;请选择文件&quot;);
    private JLabel label2 = new JLabel(&quot;模板转码&quot;);
    private JLabel label3 = new JLabel(&quot;请选择模板：&quot;);
    private JLabel label4 = new JLabel(&quot;自由转码&quot;);
    private JLabel label5 = new JLabel(&quot;视频码率：&quot;);
    private JLabel label6 = new JLabel(&quot;分辨率：&quot;);
    private JLabel label7 = new JLabel(&quot;音频码率：&quot;);
    private JLabel label8 = new JLabel(&quot;音频采样率：&quot;);
    private JLabel label9 = new JLabel(&quot;请选择转码方式：&quot;);
    private JLabel label10 = new JLabel(&quot;留做进度条：&quot;);
    private JLabel label11 = new JLabel(&quot;生成文件名称：&quot;);
    private JLabel label12 = new JLabel(&quot;生成文件格式：&quot;);

    private JComboBox Template = new JComboBox();
    private JComboBox TranscodeWay = new JComboBox();

    private JTextArea Log = new JTextArea(&quot;&quot;);
    private JScrollPane scrollPane1 = new JScrollPane();
    private JFileChooser stf = new JFileChooser(new File(&quot;d://&quot;));

    FFmpegGUI(){

        frame.setLayout(null);
        frame.setBounds(400, 200, 700, 420);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(3);
        tabbedPane.addTab(&quot;ffmpeg&quot;, this.panel1);
        tabbedPane.addTab(&quot;ffplay&quot;, this.panelx);
        tabbedPane.addTab(&quot;ffprobe&quot;, this.panely);
        tabbedPane.setBounds(10, 10, 660, 360);
        frame.add(this.tabbedPane);

        panel1.add(&quot;West&quot;,panel2);
        panel1.add(&quot;Center&quot;,panel19);
        panel19.add(&quot;Center&quot;,Log);
        panel19.add(&quot;South&quot;,label10);

        panel2.add(&quot;North&quot;,panel3);
        panel2.add(&quot;Center&quot;,panel8);

        panel3.add(panel4);
        panel3.add(panel5);

        panel4.add(&quot;North&quot;,label1);
        panel4.add(&quot;South&quot;,panel6);
        panel5.add(&quot;North&quot;,label2);
        panel5.add(&quot;South&quot;,panel7);

        panel6.add(&quot;Center&quot;,FilePath);
        panel6.add(&quot;East&quot;,Select);
        Template.setModel(new DefaultComboBoxModel(new String[] { &quot;1080p_1920x1080_2000&quot;, &quot;SHD_1280x720_1200&quot;, &quot;HD_960x540_800&quot;, &quot;SD_640x360_500&quot;, &quot;LD_360x240_300&quot;,&quot;...&quot; }));
        Template.setEditable(false);
        panel7.add(&quot;Center&quot;,Template);
        panel7.add(&quot;West&quot;,label3);

        panel8.add(&quot;North&quot;,label4);
        panel8.add(&quot;Center&quot;,panel9);

        panel9.add(&quot;North&quot;,panel10);
        panel9.add(&quot;Center&quot;,panel11);

        panel10.add(&quot;West&quot;,panel12);
        panel10.add(&quot;Center&quot;,panel13);

        panel12.add(label5);
        panel12.add(label6);
        panel12.add(label7);
        panel12.add(label8);
        panel12.add(label11);
        panel12.add(label12);

        panel13.add(VideoBitrate);
        panel13.add(resolution);
        panel13.add(AudioBitrate);
        panel13.add(AudioSampleRate);
        panel13.add(CreateFileName);
        panel13.add(CreateFileFormat);

        panel11.add(&quot;North&quot;,panel14);
        panel11.add(&quot;Center&quot;,panel15);

        TranscodeWay.setModel(new DefaultComboBoxModel(new String[] { &quot;模板转码&quot;, &quot;自由转码&quot; }));
        TranscodeWay.setEditable(false);
        panel14.add(&quot;West&quot;,label9);
        panel14.add(&quot;Center&quot;,TranscodeWay);

        panel15.add(&quot;Center&quot;,panel16);
        panel15.add(&quot;South&quot;,panel17);

        panel17.add(&quot;East&quot;,panel18);

        panel18.add(Reset);
        panel18.add(StartTranscode);

        //文件选择
        this.Select.addActionListener(new ActionListener(){
            public void actionPerformed(ActionEvent event){
                FFmpegGUI.this.stf.setFileSelectionMode(0);
                int state = FFmpegGUI.this.stf.showOpenDialog(null);
                if(state == 1){
                    return;
                    }
                File f = FFmpegGUI.this.stf.getSelectedFile();
                FFmpegGUI.this.FilePath.setText(f.getAbsolutePath());
                }
            });
        this.StartTranscode.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent event) {
            String transcodeway = FFmpegGUI.this.TranscodeWay.getSelectedItem().toString();
            if (&quot;模板转码&quot;.equals(transcodeway)) {
                String sourcefile = FFmpegGUI.this.FilePath.getText();
                String Template = FFmpegGUI.this.TranscodeWay.getSelectedItem().toString();
                FFmpegGUI.this.Log.setText(sourcefile);
                Transcode t = new Transcode();
            }
            if (&quot;自由转码&quot;.equals(transcodeway)){
                String sourcefile = FFmpegGUI.this.FilePath.getText();
                String VideoBitrate = FFmpegGUI.this.VideoBitrate.getText();
                String resolution = FFmpegGUI.this.resolution.getText();
                String AudioBitrate = FFmpegGUI.this.AudioBitrate.getText();
                String AudioSampleRate = FFmpegGUI.this.AudioSampleRate.getText();
                String CreateFileName = FFmpegGUI.this.CreateFileName.getText();
                String CreateFileFormat = FFmpegGUI.this.CreateFileFormat.getText();
                Transcode t = new Transcode();
                try {
                    t.processTranscodefree(sourcefile,VideoBitrate,resolution,AudioBitrate,AudioSampleRate,CreateFileName,CreateFileFormat);
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
            }
        });
        }

    public static void main(String args[]){
        new FFmpegGUI();
    }
}
</code></pre><p>二、Transcode</p>
<pre><code>package cn.com.huangyl.tool;

import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

public class Transcode {
    /*
    private static int checkContentType(){
        String type = sourcefile.substring(PATH.lastIndexOf(&quot;.&quot;) + 1, sourcefile.length())  
                .toLowerCase();  
        //ffmpeg能解析的格式:(asx，asf，mpg，wmv，3gp，mp4，mov，avi，flv等)
        if (type.equals(&quot;avi&quot;)) {
            return 0;
        } else if (type.equals(&quot;mpg&quot;)) {
            return 0;
        } else if (type.equals(&quot;wmv&quot;)) {
            return 0;
        } else if (type.equals(&quot;3gp&quot;)) {
            return 0;
        } else if (type.equals(&quot;mov&quot;)) {
            return 0;
        } else if (type.equals(&quot;mp4&quot;)) {
            return 0;
        } else if (type.equals(&quot;asf&quot;)) {
            return 0;
        } else if (type.equals(&quot;asx&quot;)) {
            return 0;
        } else if (type.equals(&quot;flv&quot;)) {
            return 0;
        }
        //对ffmpeg无法解析的文件格式(wmv9，rm，rmvb等),可以先用别的工具（mencoder）转换为avi(ffmpeg能解析的)格式.
        else if (type.equals(&quot;wmv9&quot;)) {  
            return 1;  
        } else if (type.equals(&quot;rm&quot;)) {  
            return 1;
        } else if (type.equals(&quot;rmvb&quot;)) {  
            return 1;  
        }  
        return 9;  
    }

    // 对ffmpeg无法解析的文件格式(wmv9，rm，rmvb等), 可以先用别的工具（mencoder）转换为avi(ffmpeg能解析的)格式.  
    private static String processAVI(int type) {  
        List&lt;String&gt; commend = new ArrayList&lt;String&gt;();  
        commend.add(&quot;c:\\ffmpeg\\mencoder&quot;);  
        commend.add(sourcefile);  
        commend.add(&quot;-oac&quot;);  
        commend.add(&quot;lavc&quot;);  
        commend.add(&quot;-lavcopts&quot;);  
        commend.add(&quot;acodec=mp3:abitrate=64&quot;);  
        commend.add(&quot;-ovc&quot;);  
        commend.add(&quot;xvid&quot;);  
        commend.add(&quot;-xvidencopts&quot;);  
        commend.add(&quot;bitrate=600&quot;);  
        commend.add(&quot;-of&quot;);  
        commend.add(&quot;avi&quot;);  
        commend.add(&quot;-o&quot;);  
        commend.add(&quot;c:\\ffmpeg\\output\\a.avi&quot;);  
        try {  
            ProcessBuilder builder = new ProcessBuilder();  
            builder.command(commend);  
            builder.start();  
            return &quot;c:\\ffmpeg\\output\\a.avi&quot;;  
        } catch (Exception e) {  
            e.printStackTrace();  
            return null;  
        }  
    }

    public void processTranscodetemp(String Template,String sourcefile) throws Exception {
        String type = sourcefile.substring(sourcefile.lastIndexOf(&quot;.&quot;) + 1, sourcefile.length())  
                .toLowerCase();
        String F1080p_1920x1080_2000 = &quot;ffmpeg -i &quot;+sourcefile+&quot;-vcodec h264 -b:v 2000k -r 25 -s 1920x1080 -pix_fmt yuv420p -g 33 -acodec aac -b:a 128k -ar 44100 -ac 2 -strict -2 -f &quot;+ type +&quot; -y &quot;+ &quot;1080P_2M.&quot;+type;
        String SHD_1280x720_1200 = &quot;ffmpeg -i &quot;+sourcefile+&quot;-vcodec h264 -b:v 1200k -r 25 -s 1280x720 -pix_fmt yuv420p -g 33 -acodec aac -b:a 128k -ar 44100 -ac 2 -strict -2 -f &quot;+ type +&quot; -y &quot;+ &quot;720P_1200.&quot;+type;
        String HD_960x540_800 = &quot;ffmpeg -i &quot;+sourcefile+&quot;-vcodec h264 -b:v 800k -r 25 -s 960x540 -pix_fmt yuv420p -g 33 -acodec aac -b:a 128k -ar 44100 -ac 2 -strict -2 -f &quot;+ type +&quot; -y &quot;+ &quot;540P_800.&quot;+type;
        String SD_640x360_500 = &quot;ffmpeg -i &quot;+sourcefile+&quot;-vcodec h264 -b:v 500k -r 25 -s 640x360 -pix_fmt yuv420p -g 33 -acodec aac -b:a 128k -ar 44100 -ac 2 -strict -2 -f &quot;+ type +&quot; -y &quot;+ &quot;360P_500.&quot;+type;
        String LD_360x240_300 = &quot;ffmpeg -i &quot;+sourcefile+&quot;-vcodec h264 -b:v 300k -r 25 -s 360x240 -pix_fmt yuv420p -g 33 -acodec aac -b:a 128k -ar 44100 -ac 2 -strict -2 -f &quot;+ type +&quot; -y &quot;+ &quot;240P_500.&quot;+type;
        if (!checkfile(sourcefile)) {
            System.out.println(sourcefile + &quot; is not file&quot;);
        }
    try{
            Runtime rt = Runtime.getRuntime();
            Process proc;
            proc = rt.exec(F1080p_1920x1080_2000);
            // 取得命令结果的输出流
            InputStream fis = proc.getInputStream();
            // 用一个读输出流类去读  
            InputStreamReader isr = new InputStreamReader(fis);
            // 用缓冲器读行  
            BufferedReader br = new BufferedReader(isr); 
            String line = null; 
            // 直到读完为止  
            while ((line = br.readLine()) != null) {
                System.out.println(line);
                }
            } catch (IOException e) {
                e.printStackTrace();
                }
        }  
*/
    public boolean processTranscodefree(String sourcefile,String VideoBitrate,String resolution,String AudioBitrate,String AudioSampleRate,String CreateFileName,String CreateFileFormat) throws Exception{  
        File diretory = new File(&quot;&quot;);
        String currPath = diretory.getAbsolutePath();
        String outputPath = currPath + &quot;\\output\\&quot;;  
        String ffmpegPath = currPath + &quot;\\FFmpeg\\bin\\&quot;;  
        if (!checkfile(sourcefile)) {
            System.out.println(sourcefile + &quot; is not file&quot;);  
        }
        // 文件命名  
        //Calendar c = Calendar.getInstance(); 
        List&lt;String&gt; commend = new ArrayList&lt;String&gt;();
        commend.add(ffmpegPath+&quot;ffmpeg.exe&quot;); 
        //commend.add(&quot;F:\\java\\TranscodeGUI\\ffmpeg.exe&quot;); 
        commend.add(&quot;-i&quot;);
        commend.add(sourcefile);
        commend.add(&quot;-ab&quot;);
        commend.add(&quot;-vcodec&quot;);
        commend.add(&quot;h264&quot;);
        //commend.add(&quot;&quot;);
        commend.add(&quot;-b:v&quot;);
        commend.add(VideoBitrate);
        commend.add(&quot;-r&quot;);
        commend.add(&quot;25&quot;);
        commend.add(&quot;-s&quot;);
        commend.add(&quot;resolution&quot;);
        commend.add(&quot;-pix_fmt&quot;);
        commend.add(&quot;yuv420p&quot;);
        commend.add(&quot;-g&quot;);
        commend.add(&quot;33&quot;);
        commend.add(&quot;-acodec&quot;);
        commend.add(&quot;aac&quot;);
        commend.add(&quot;-b:a&quot;);
        commend.add(AudioBitrate);
        commend.add(&quot;-ac&quot;);
        commend.add(&quot;2&quot;);
        commend.add(&quot;-strict&quot;);
        commend.add(&quot;-2&quot;);
        commend.add(&quot;-f&quot;);
        commend.add(CreateFileFormat);
        commend.add(&quot;-y&quot;);
        commend.add(outputPath+CreateFileName+&quot;.&quot;+CreateFileFormat);
        try {
            ProcessBuilder builder = new ProcessBuilder();  
            builder.command(commend);  
            Process proc = builder.start();
            InputStream stderr = proc.getErrorStream();
            InputStreamReader isr = new InputStreamReader(stderr);
            BufferedReader br = new BufferedReader(isr);
            String line = null;
            while ( (line = br.readLine()) != null)
                System.out.println(line);

            int exitVal = proc.waitFor();
            System.out.println(&quot;Process exitValue: &quot; + exitVal);
        } catch (Throwable t) {
            t.printStackTrace();
            return false;
        }
        return true;
    }
/*
        try {  
            Runtime rt = Runtime.getRuntime();
            ProcessBuilder builder = new ProcessBuilder(commend);  
            builder.command(commend);  
            builder.start();

            System.out.println(&quot;开始转码，请等待······&quot;);

        } catch (Exception e) {  
            e.printStackTrace();
            System.out.println(&quot;转码异常，请查看日志！&quot;);
        }
        */

//检查文件是否存在
    private static boolean checkfile(String path) {  
        File file = new File(path);  
        if (!file.isFile()) {  
            return false;  
        }  
        return true;  
    }
}
</code></pre>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/自动化测适用范围/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HardElm">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HardElm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/自动化测适用范围/" itemprop="url">自动化测试的适用范围</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T09:30:50+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/自动化测试/" itemprop="url" rel="index">
                    <span itemprop="name">自动化测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/自动化测适用范围/" class="leancloud_visitors" data-flag-title="自动化测试的适用范围">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>什么情况适用自动化测试 什么情况不适用自动化测试</p>
<p>一、不适合自动化测试的情况<br> • 定制型项目（一次性的）。为客户定制的项目，维护期由客户方承担的，甚至采用的开发语言、运行环境也是客户特别要求的，即公司在这方面的测试积累就少，这样的项目不适合作自动化测试。<br> • 项目周期很短的项目。项目周期很短，测试周期很短，就不值得花精力去投资自动化测试，好不容易建立起的测试脚本，不能得到重复的利用是不现实的。<br> • 业务规则复杂的对象。业务规则复杂的对象，有很多的逻辑关系、运算关系，工具就很难测试。<br> • 美观、声音、易用性测试。人的感观方面的：界面的美观、声音的体验、易用性的测试，也只有人来测试。<br> • 测试很少运行。测试很少运行，对自动化测试就是一种浪费。自动化测试就是让它不厌其烦的、反反复复的运行才有效率。<br> • 软件不稳定。软件不稳定，则会由于这些不稳定因素导致自动化测试失败。只有当软件达到相对的稳定，没有界面性严重错误和中断错误才能开始自动化测试。<br> • 涉及物理交互。工具很难完成与物理设备的交互，比如刷卡的测试等。</p>
<p>二、适合自动化测试的情况</p>
<p>自动化测试之所以能在很多大公司实施起来，就是有它适合自动化测试的特点和高的投资回报率。<br> • 产品型项目。产品型的项目，每个项目只改进少量的功能，但每个项目必须反反复复的测试那些没有改动过的功能。这部分测试完全可以让自动化测试来承担， 同时可以把新加入的功能的测试也慢慢地加入到自动化测试当中。<br> • 增量式开发、持续集成项目。由于这种开发模式是频繁的发布新版本进行测试，也就需要频繁的自动化测试，以便把人从中解脱出来测试新的功能。<br> • 能够自动编译、自动发布的系统。要能够完全实现自动化测试，必须具有能够自动化编译，自动化发布系统进行测试的功能。 当然，不能达到这个要求也可以在手工干预的情况下进行自动化测试。<br> • 回归测试。回归测试是自动化测试的强项，它能够很好的验证你是否引入了新的缺陷，老的缺陷是否修改过来了。在某种程度上可以把自动化测试工具叫做回归测试工具。<br> • 多次重复、机械性动作，将烦琐的任务转化为自动化测试。自动化测试最适用于多次重复、机械性动作，这样的测试对它来说从不会失败。比如要向系统输入大量的相似数据来测试压力和报表。<br> • 需要频繁运行测试。在一个项目中需要频繁的运行测试，测试周期按天算，就能最大限度的利用测试脚本</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/Selenium初学总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HardElm">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HardElm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/Selenium初学总结/" itemprop="url">Selenium初学总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T09:22:50+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/自动化测试/" itemprop="url" rel="index">
                    <span itemprop="name">自动化测试</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/Selenium初学总结/" class="leancloud_visitors" data-flag-title="Selenium初学总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>工作中研究过一段时间自动化，因为一些原因暂时搁置了，以后会再捡起来，特记录一些selenium基本知识，供以后复习使用。</p>
<p>selenium集成java的一些常用方法：</p>
<p>1、页面元素定位方法：<br>ID:         driver.findElement(By.id(“ID值”));<br>Name:      driver.findElement(By.name(“name值”));<br>链接的全部文字 :<br>            driver.findElement(By.linkText(“链接的全部文字内容”));<br>部分链接文字:<br>            driver.findElement(By.partialLinkText(“链接的部分文字内容”));<br>Xpath :    driver.findElement(By.xpath(“Xpath定位表达式”));<br>CSS:        driver.findElement(By.cssSelector(“CSS定位表达式”));<br>Class:    driver.findElement(By.className(“页面元素的Class属性值”));<br>标签名称:<br>driver.findElement(By.tagName (“页面元素的HTML标签名称”));</p>
<p>2、打开浏览器：<br>打开firefox ： WebDriver driver= new FirefoxDriver();<br>打开ie ：WebDriver driver =new InternetExplorerDriver();<br>打开chrome： WebDriver driver = new   ChromeDriver();<br>打开指定路径浏览器 ：<br>  System.setProperty(“webdriver.firefox.bin”,”D:\ProgramFiles\MozillaFirefox\firefox.exe”); </p>
<p>3、关闭浏览器：<br>driver.close();<br>driver.quit();</p>
<p>4、返回当前页面Title URL<br>driver.getTitle();<br>driver.getCurrentUrl(); </p>
<p>5、返回上一个访问的网页<br>driver.navigate().to(url1);<br>driver.navigate().to(url2);<br>driver.navigate().back();<br>6、刷新当前网页：<br>driver.navigate().refresh();<br>7、输入框中输入指定内容:<br>driver.sendKeys();<br>8、输入框中清除文字内容：<br>driver.clear();<br>9、查看页面元素属性：<br>driver.getAttribute(“value”);<br>10、点击按钮：<br>driver.click();<br>11、操作frame：<br>Driver.switchTo.frame()<br>12、单选下拉列表：<br>Select dropList = new Select(element);<br>Select.getFrestSelectOption().getText();<br>Select.selectByIndex();<br>Select.selectByValue();<br>Select.selectByVisibleText();<br>例子：<br>    单选框：<br>List<webelement> radioList = driver.findElements();<br>radio. getAttribute(“Value”).equals(“”);<br>radio.isSelectd()<br>radio.click();<br>    复选框：<br>List<webelement> checkList = driver.findElements();<br>check.getAttribute(“Value”).equals(“”);<br>check.isSelectd()<br>check.click();<br>13、Alert弹窗：<br>Alert alert = driver.switchTo().alert();<br>     alert.accept();<br>14、执行JavaScript脚本：<br>声明一个JavaScript 执行器对象<br>    JavaScriptExecutor js = (JavaScriptExecutor )driver;<br>    js.executeScript(“loginSubmit();”);</webelement></webelement></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/07/12/nmon使用总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="HardElm">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/header.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="HardElm's blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/07/12/nmon使用总结/" itemprop="url">Nmon使用总结</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-07-12T09:14:00+08:00">
                2017-07-12
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/性能工具/" itemprop="url" rel="index">
                    <span itemprop="name">性能工具</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/07/12/nmon使用总结/" class="leancloud_visitors" data-flag-title="Nmon使用总结">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一、安装：<br>    1、下载nmon，wget <a href="http://sourceforge.net/projects/nmon/files/nmon_linux_14i.tar.gz" target="_blank" rel="external">http://sourceforge.net/projects/nmon/files/nmon_linux_14i.tar.gz</a><br>    2、拷贝到服务器上，scp nmon_linux_14i.tar.gz root@10.171.112.220:/home<br>    3、解压<br>    4、根据服务器操作系统，执行相关命令<br>二、使用方法：<br>    监控系统性能参数生成监控文件： nmon -f -s 2 -c 300 （每隔2秒采集一次性能参数，总共采集300次，即10分钟）</p>
<p>注意：nmon analyser打开监控文件报错误‘13’:类型不匹配，的解决办法，更改系统日期格式为“yyyy-mm-dd”</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div id="sidebar-dimmer"></div>
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/header.jpg"
               alt="HardElm" />
          <p class="site-author-name" itemprop="name">HardElm</p>
           
              <p class="site-description motion-element" itemprop="description">在路上····</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">16</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="github" target="_blank" title="LinkLabel">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  LinkLabel
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      
        <div class="back-to-top">
          <i class="fa fa-arrow-up"></i>
          
        </div>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">HardElm</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>


        
      </div>
    </footer>

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  






  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.1"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("", "");AV.useAVCloudUS();</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  

  

  

  

</body>
</html>
